'use strict';

function urlparser(url) {
	var a = document.createElement('a');
	a.href = url;
	return {
		protocol: a.protocol,
		hostname: a.hostname,
		port: a.port,
		pathname: a.pathname,
		query: a.search,
		hash: a.hash,
		host: a.host
	};
}

function errorHandler(msg, url, row, col, error) {
	var err = {
		message: msg,
		url: url,
		row: row,
		col: col
	};
	console.error(err);
	this.renderError(err);
	return false;
}

function renderError(err) {
	var container = document.createElement('div');
	container.classList.add('error');
	container.textContent = [this.urlparser(err.url).pathname || '', err.row || '', err.col || '', err.message || ''].join(':');
	document.body.appendChild(container);
}

function createElement(tag, props, children) {
	var element = document.createElement(tag);

	Object.keys(props).forEach(function (key) {
		if (key.substring(0, 'data-'.length) === 'data-') {
			element.setAttribute(key, props[key]);
		} else {
			element[key] = props[key];
		}
	});

	children && children.forEach(function (child) {
		if (typeof child === 'string') {
			child = document.createTextNode(child);
		}

		element.appendChild(child);
	});

	return element;
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL2hlbHBlcnMuanMiXSwibmFtZXMiOlsidXJscGFyc2VyIiwidXJsIiwiYSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImhyZWYiLCJwcm90b2NvbCIsImhvc3RuYW1lIiwicG9ydCIsInBhdGhuYW1lIiwicXVlcnkiLCJzZWFyY2giLCJoYXNoIiwiaG9zdCIsImVycm9ySGFuZGxlciIsIm1zZyIsInJvdyIsImNvbCIsImVycm9yIiwiZXJyIiwibWVzc2FnZSIsImNvbnNvbGUiLCJyZW5kZXJFcnJvciIsImNvbnRhaW5lciIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50Iiwiam9pbiIsImJvZHkiLCJhcHBlbmRDaGlsZCIsInRhZyIsInByb3BzIiwiY2hpbGRyZW4iLCJlbGVtZW50IiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJrZXkiLCJzdWJzdHJpbmciLCJsZW5ndGgiLCJzZXRBdHRyaWJ1dGUiLCJjaGlsZCIsImNyZWF0ZVRleHROb2RlIl0sIm1hcHBpbmdzIjoiOztBQUFBLFNBQVNBLFNBQVQsQ0FBb0JDLEdBQXBCLEVBQXlCO0FBQ3hCLEtBQUlDLElBQUlDLFNBQVNDLGFBQVQsQ0FBdUIsR0FBdkIsQ0FBUjtBQUNBRixHQUFFRyxJQUFGLEdBQVNKLEdBQVQ7QUFDQSxRQUFPO0FBQ05LLFlBQVVKLEVBQUVJLFFBRE47QUFFTkMsWUFBVUwsRUFBRUssUUFGTjtBQUdOQyxRQUFNTixFQUFFTSxJQUhGO0FBSU5DLFlBQVVQLEVBQUVPLFFBSk47QUFLTkMsU0FBT1IsRUFBRVMsTUFMSDtBQU1OQyxRQUFNVixFQUFFVSxJQU5GO0FBT05DLFFBQU1YLEVBQUVXO0FBUEYsRUFBUDtBQVNBOztBQUVELFNBQVNDLFlBQVQsQ0FBdUJDLEdBQXZCLEVBQTRCZCxHQUE1QixFQUFpQ2UsR0FBakMsRUFBc0NDLEdBQXRDLEVBQTJDQyxLQUEzQyxFQUFrRDtBQUNqRCxLQUFJQyxNQUFNO0FBQ1RDLFdBQVNMLEdBREE7QUFFVGQsT0FBS0EsR0FGSTtBQUdUZSxPQUFLQSxHQUhJO0FBSVRDLE9BQUtBO0FBSkksRUFBVjtBQU1BSSxTQUFRSCxLQUFSLENBQWNDLEdBQWQ7QUFDQSxNQUFLRyxXQUFMLENBQWlCSCxHQUFqQjtBQUNBLFFBQU8sS0FBUDtBQUNBOztBQUVELFNBQVNHLFdBQVQsQ0FBc0JILEdBQXRCLEVBQTJCO0FBQzFCLEtBQUlJLFlBQVlwQixTQUFTQyxhQUFULENBQXVCLEtBQXZCLENBQWhCO0FBQ0FtQixXQUFVQyxTQUFWLENBQW9CQyxHQUFwQixDQUF3QixPQUF4QjtBQUNBRixXQUFVRyxXQUFWLEdBQXdCLENBQ3ZCLEtBQUsxQixTQUFMLENBQWVtQixJQUFJbEIsR0FBbkIsRUFBd0JRLFFBQXhCLElBQW9DLEVBRGIsRUFFckJVLElBQUlILEdBQUosSUFBVyxFQUZVLEVBR3JCRyxJQUFJRixHQUFKLElBQVcsRUFIVSxFQUlyQkUsSUFBSUMsT0FBSixJQUFlLEVBSk0sRUFLdEJPLElBTHNCLENBS2pCLEdBTGlCLENBQXhCO0FBTUF4QixVQUFTeUIsSUFBVCxDQUFjQyxXQUFkLENBQTBCTixTQUExQjtBQUNBOztBQUVELFNBQVNuQixhQUFULENBQXVCMEIsR0FBdkIsRUFBNEJDLEtBQTVCLEVBQW1DQyxRQUFuQyxFQUE2QztBQUN6QyxLQUFNQyxVQUFVOUIsU0FBU0MsYUFBVCxDQUF1QjBCLEdBQXZCLENBQWhCOztBQUVBSSxRQUFPQyxJQUFQLENBQVlKLEtBQVosRUFBbUJLLE9BQW5CLENBQTJCLFVBQVNDLEdBQVQsRUFBYztBQUNyQyxNQUFJQSxJQUFJQyxTQUFKLENBQWMsQ0FBZCxFQUFpQixRQUFRQyxNQUF6QixNQUFxQyxPQUF6QyxFQUFrRDtBQUM5Q04sV0FBUU8sWUFBUixDQUFxQkgsR0FBckIsRUFBMEJOLE1BQU1NLEdBQU4sQ0FBMUI7QUFDSCxHQUZELE1BRU87QUFDSEosV0FBUUksR0FBUixJQUFlTixNQUFNTSxHQUFOLENBQWY7QUFDSDtBQUNKLEVBTkQ7O0FBUUFMLGFBQVlBLFNBQVNJLE9BQVQsQ0FBaUIsVUFBU0ssS0FBVCxFQUFnQjtBQUN6QyxNQUFJLE9BQU9BLEtBQVAsS0FBaUIsUUFBckIsRUFBK0I7QUFDM0JBLFdBQVF0QyxTQUFTdUMsY0FBVCxDQUF3QkQsS0FBeEIsQ0FBUjtBQUNIOztBQUVEUixVQUFRSixXQUFSLENBQW9CWSxLQUFwQjtBQUNILEVBTlcsQ0FBWjs7QUFRQSxRQUFPUixPQUFQO0FBQ0giLCJmaWxlIjoianMvaGVscGVycy5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIHVybHBhcnNlciAodXJsKSB7XG5cdGxldCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuXHRhLmhyZWYgPSB1cmw7XG5cdHJldHVybiB7XG5cdFx0cHJvdG9jb2w6IGEucHJvdG9jb2wsXG5cdFx0aG9zdG5hbWU6IGEuaG9zdG5hbWUsXG5cdFx0cG9ydDogYS5wb3J0LFxuXHRcdHBhdGhuYW1lOiBhLnBhdGhuYW1lLFxuXHRcdHF1ZXJ5OiBhLnNlYXJjaCxcblx0XHRoYXNoOiBhLmhhc2gsXG5cdFx0aG9zdDogYS5ob3N0XG5cdH1cbn1cblxuZnVuY3Rpb24gZXJyb3JIYW5kbGVyIChtc2csIHVybCwgcm93LCBjb2wsIGVycm9yKSB7XG5cdGxldCBlcnIgPSB7XG5cdFx0bWVzc2FnZTogbXNnLFxuXHRcdHVybDogdXJsLFxuXHRcdHJvdzogcm93LFxuXHRcdGNvbDogY29sXG5cdH07XG5cdGNvbnNvbGUuZXJyb3IoZXJyKTtcblx0dGhpcy5yZW5kZXJFcnJvcihlcnIpO1xuXHRyZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHJlbmRlckVycm9yIChlcnIpIHtcblx0bGV0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG5cdGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdlcnJvcicpO1xuXHRjb250YWluZXIudGV4dENvbnRlbnQgPSBbXG5cdFx0dGhpcy51cmxwYXJzZXIoZXJyLnVybCkucGF0aG5hbWUgfHwgJydcblx0XHQsIGVyci5yb3cgfHwgJydcblx0XHQsIGVyci5jb2wgfHwgJydcblx0XHQsIGVyci5tZXNzYWdlIHx8ICcnXG5cdF0uam9pbignOicpO1xuXHRkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQodGFnLCBwcm9wcywgY2hpbGRyZW4pIHtcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpO1xuXG4gICAgT2JqZWN0LmtleXMocHJvcHMpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgIGlmIChrZXkuc3Vic3RyaW5nKDAsICdkYXRhLScubGVuZ3RoKSA9PT0gJ2RhdGEtJykge1xuICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoa2V5LCBwcm9wc1trZXldKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVsZW1lbnRba2V5XSA9IHByb3BzW2tleV07XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGNoaWxkcmVuICYmIGNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24oY2hpbGQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjaGlsZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGNoaWxkID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY2hpbGQpO1xuICAgICAgICB9XG5cbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChjaGlsZCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gZWxlbWVudDtcbn1cbiJdfQ==
